---
description: vue 项目的代码规范
---

在团队开发过程中需要良好的代码规范帮助我们提高团队代码协作，常见的方式就是 使用 eslint 配合 prettier 来进行代码规范的约束。具体使用可以参考 [eslint](https://eslint.org/) 和 [prettier](https://prettier.io/) 官网。 或者是章节中的前端工程化 =》搭建代码规范 章节中讲解


## 关于 vue 配置 eslint 和 prettier

在通过vite安装完成项目后，选择了 eslint 和 prettier 作为代码规范检测工具后生成两个文件  `.eslintrc.cjs` 和 `.prettierrc.json`

### .eslintrc.cjs 文件



~~~js
/* eslint-env node */
require('@rushstack/eslint-patch/modern-module-resolution')

module.exports = {
  root: true,
  'extends': [
    'plugin:vue/vue3-essential',
    'eslint:recommended',
    '@vue/eslint-config-typescript',
    '@vue/eslint-config-prettier/skip-formatting'
  ],
  parserOptions: {
    ecmaVersion: 'latest'
  }
}
~~~
这段代码 require('@rushstack/eslint-patch/modern-module-resolution') 的作用是在 ESLint 中启用现代模块解析。具体来说，它会使用 Rush Stack 提供的模块解析器来解析模块路径，以确保在使用 ESLint 进行代码检查时，模块路径的解析方式与实际运行时的解析方式一致。

举个例子，假设你的项目中使用了一些依赖，这些依赖是通过 npm 安装的。在使用 ESLint 进行代码检查时，如果不启用现代模块解析，ESLint 可能会无法正确地解析这些依赖的路径，从而导致代码检查失败。启用现代模块解析可以解决这个问题，确保 ESLint 能够正确地解析依赖的路径。 具体[参考](https://github.com/eslint/eslint/issues/3458)

* [plugin:vue/vue3-essential](https://eslint.vuejs.org/user-guide/#installation) ，默认的 JavaScript 解析器必须被替换，因为 Vue.js 单个文件组件不是普通的 JavaScript，而是自定义的文件格式。Vue-eslint-parser 是一个替代解析器，它使用表示模板语法特定部分的节点以及 标记的内容生成增强的 AST	，使用他首先安装 `yarn add -D eslint eslint-plugin-vue` 其中 plugin:vue/vue3-essential 规则主要针对 加上防止错误或意外行为的规则，但不会强制执行个人偏好的规则。如果你想要一个更严格的规则集，可以使用 plugin:vue/vue3-strongly-recommended 或 plugin:vue/vue3-recommended。查看他的[规则](https://eslint.vuejs.org/rules/)

* [eslint:recommended](https://eslint.org/docs/rules/) 该规则集包含一些在 ESLint 官方文档中被认为是最佳实践的规则，这些规则可以帮助你避免一些常见的错误。

* [@vue/eslint-config-typescript](https://www.npmjs.com/package/@vue/eslint-config-typescript)：专门给 Vue 使用的 TS 验证规则它还关闭了 eslint 中的几个冲突规则: 推荐规则集，这个配置是专门为 **@vue/cli & create-vue** 设置而设计的，不适合外部使用(它可以使用，但可能需要在用户端进行一些修改——详细信息请参阅配置文件)。需要配合 **@rushstack/eslint-patch** 安装 `npm add --dev @vue/eslint-config-typescript @rushstack/eslint-patch` ，`@vue/eslint-config-typescript` 有两套规则集，一个是 `@vue/eslint-config-typescript` ，一个就是 `@vue/eslint-config-typescript/recommended` 。其中，后者更加严格参考[规则](https://typescript-eslint.io/rules/)


* [@vue/eslint-config-prettier/skip-formatting](https://www.npmjs.com/package/@vue/eslint-config-prettier):专门给 Vue 使用的 Prettier 验证规则（eslint-config-prettier）。作用：关闭所有不需要的、或者可能与 Prettier 产生冲突的 eslint 规则。


* parserOptions：解析器选项，允许你指定 JS 语言（包括 JSX 语法），默认为 ES5。这里设置为 latest，表示支持最新的 ES 语法。

**注意他们的顺序 Prettier 它应该被放在 extends 数组的最后而覆盖其他配置，这样就能完全关闭 ESLint 规则集中与格式化代码相关的规则，并且如果在 eslint 中集成了  Prettier，那么在使用 eslint fix 时候也会一并修复 prettier 的规则。**

## 说明
在之前章节中说过 解释器 和冲突，但在项目搭建生成中并没有看到 用来解决 eslint 和 prettier 冲突的插件，这是因为在 `@vue/eslint-config-prettier`  依赖解决了 eslint 和 prettier 的冲突，所以在项目中不需要再次安装了。

![](/images/2023-08-17-08-22-36.png)


关于vue 的解释器配置 参考在 `plugin:vue/vue3-essential`
![](/images/2023-08-17-08-25-37.png)


## 参考

[团队协作（一）—— 你不知道的 ESLint + Prettier ](https://www.cnblogs.com/buildnewhomeland/p/17403682.html)